(this.webpackJsonpblock22=this.webpackJsonpblock22||[]).push([[0],{175:function(e,t,a){},179:function(e,t,a){},200:function(e,t,a){e.exports=a.p+"static/media/Avatar.1197b293.svg"},210:function(e,t,a){e.exports=a(316)},219:function(e,t,a){},269:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(33),l=a.n(c),s=a(24),i=a(11),o=(a(218),a(219),a(326)),u=a(21),m=a(6),f=a(329),E=a(330),p=a(324),d=a(111),g=a(31),b=a(57),h=a.n(b),v=a(71),w=a(72),_=a.n(w),y=function(){var e={"Content-Type":"application/json; charset=utf-8"};return localStorage.getItem("userInfo")&&(e.Authorization="Token ".concat(JSON.parse(localStorage.getItem("userInfo")).token)),e},N=function(){var e=Object(v.a)(h.a.mark((function e(t,a,r){var n,c,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(t,"https://conduit.productionready.io"),c=JSON.stringify({user:r}),e.prev=2,e.next=5,_()({method:a,url:n.toString(),data:c,headers:y()});case 5:return l=e.sent,e.abrupt("return",l.data);case 9:throw e.prev=9,e.t0=e.catch(2),e.t0.response;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a,r){return e.apply(this,arguments)}}(),j=a(130),S=a(39),O=function(e){var t=e.errors;return Object.keys(t).reduce((function(e,a){return Object(S.a)(Object(S.a)({},e),{},Object(j.a)({},"email or password"===a?"email":a,"".concat(a," ").concat(t[a][0]).charAt(0).toUpperCase()+"".concat(a," ").concat(t[a][0]).slice(1)))}),{})},A=function(e){if(!e)return{errorUnknown:"Sorry, something went wrong :("};switch(e.status){case 422:return O(e.data);default:return{errorUnknown:"Sorry, something went wrong :("}}},I=function(e){return{type:"SET_USER",user:e}},k=function(e){return{type:"LOAD_ARTICLES",articles:e}},C=function(e){return{type:"SET_CURRENT_ARTICLE",article:e}},T=a(328),U=function(e){return n.a.createElement(f.a,{gutter:[16,36],justify:"center"},n.a.createElement(E.a,{span:24},n.a.createElement(T.a,{message:"".concat(e).charAt(0).toUpperCase()+"".concat(e).slice(1),type:"error"})))},L=(a(269),function(e){var t=e.setUser,a=e.history;return n.a.createElement(f.a,{className:"formWrapper",justify:"center"},n.a.createElement(m.e,{initialValues:{email:"",password:""},onSubmit:function(e,r){var n=r.setSubmitting,c=r.setErrors;N("api/users/login","post",e).then((function(r){var n=r.user;localStorage.setItem("userInfo",JSON.stringify({email:e.email,password:e.password,token:n.token}).toString()),N("".concat("api/profiles","/").concat(n.username),"get").then((function(e){var r=e.image;t(g.omit(n,["token"]),r),a.replace("/")}))})).catch((function(e){return c(A(e))})),n(!1)}},(function(e){var t=e.isSubmitting,a=e.errors;return n.a.createElement(m.d,null,n.a.createElement(f.a,{className:"form__title",justify:"center"},"Sign in"),a.errorUnknown&&U(a.errorUnknown),n.a.createElement(m.a,{name:"email",render:function(e){return U(e)}}),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"email",className:"form__label"},"Email address:"," "),n.a.createElement(m.b,{as:p.a,type:"email",name:"email",placeholder:"Email address"}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"password",className:"form__label"},"Password:"," "),n.a.createElement(m.b,{as:p.a.Password,name:"password",placeholder:"Password"}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement(d.a,{htmlType:"submit",type:"primary",disabled:t,block:!0,className:"submitButton"},"Login"))),n.a.createElement(f.a,{gutter:[0,18],justify:"center"},n.a.createElement("span",{className:"form__question"},"Don`t have an account?\xa0"),n.a.createElement(s.b,{to:"/signup"},"Sign Up.")))})))}),P=Object(i.b)(null,(function(e){return{setUser:function(t){return e(I(t))}}}))(L);L.defaultProps={history:void 0};var R=a(325),x=(a(175),a(48)),F=x.b().shape({username:x.d().required(),email:x.d().email().required(),password:x.d().min(1,"Too short, minimum 1 character").max(20,"Too long, maximum 20 characters").required(),repeatPassword:x.d().test(null,"Password mismatch!",(function(e){var t=x.c("password");return e===this.resolve(t)})),acceptTerms:x.a().test("Accept","Accept terms required.",(function(e){return e}))}),B=Object(i.b)(null,(function(e){return{setUser:function(t){return e(I(t))}}}))((function(e){var t=e.setUser,a=e.history;return n.a.createElement(f.a,{className:"formWrapper"},n.a.createElement(m.e,{initialValues:{username:"",email:"",password:"",repeatPassword:"",acceptTerms:!1},validationSchema:F,onSubmit:function(e,r){var n=r.setSubmitting,c=r.setErrors;N("api/users","post",Object(S.a)(Object(S.a)({},e),{},{image:"https://static.productionready.io/images/smiley-cyrus.jpg"})).then((function(r){var n=r.user;localStorage.setItem("userInfo",JSON.stringify({email:e.email,password:e.password,token:n.token}).toString()),N("api/user","get").then((function(e){var r=e.user.image;t(g.omit(Object(S.a)(Object(S.a)({},n),{},{image:r}),["token"])),a.replace("/")}))})).catch((function(e){return c(A(e))})),n(!1)}},(function(e){var t=e.isSubmitting,a=e.errors;return n.a.createElement(m.d,null,n.a.createElement(f.a,{className:"form__title",justify:"center"},"Create new account"),a.errorUnknown&&U(a.errorUnknown),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"username",className:"form__label"},"Username:"," "),n.a.createElement(m.b,{as:p.a,name:"username",placeholder:"Username"}),n.a.createElement(m.a,{name:"username",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"email",className:"form__label"},"Email address:"," "),n.a.createElement(m.b,{as:p.a,type:"email",name:"email",placeholder:"Email address"}),n.a.createElement(m.a,{name:"email",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"password",className:"form__label"},"Password:"," "),n.a.createElement(m.b,{as:p.a.Password,name:"password",placeholder:"Password"}),n.a.createElement(m.a,{name:"password",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"repeatPassword",className:"form__label"},"Repeat Password:"," "),n.a.createElement(m.b,{as:p.a.Password,name:"repeatPassword",placeholder:"Repeat Password"}),n.a.createElement(m.a,{name:"repeatPassword",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement(m.b,{as:R.a,name:"acceptTerms"},n.a.createElement("span",{className:"form__label--theme_grey8"},"I agree to the processing of my personal information")),n.a.createElement(m.a,{name:"acceptTerms",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement(d.a,{htmlType:"submit",type:"primary",disabled:t,block:!0,className:"submitButton"},"Create"))),n.a.createElement(f.a,{justify:"center"},n.a.createElement("span",{className:"form__question"},"Already have an account?\xa0"),n.a.createElement(s.b,{to:"/login"},"Sign In.")))})))})),q=a(320),D=a(322),J=a(331),W=a(321),V=a(319),z=(a(283),a(78)),G=a(332),H=a(333),X=function(){var e=Object(v.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(t,"/").concat(a),"https://conduit.productionready.io"),e.prev=1,e.next=4,_.a.get(r.toString(),{headers:y()});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0.response;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),Y=(a(284),function(e){var t=e.slug,a=e.articlesList,c=e.setArticles,l=Object(r.useState)({}),s=Object(z.a)(l,2),i=s[0],o=i.favorited,u=i.favCount,m=s[1];void 0===o&&X("api/articles",t).then((function(e){var t=e.article;m({favorited:t.favorited,favCount:t.favoritesCount})})).catch((function(){return null}));var f=function(){var e=o?"delete":"post";N("".concat("api/articles","/").concat(t,"/favorite"),e).then((function(e){var r=e.article;if(a.length){var n=a.map((function(e){return e.slug===t?Object(S.a)(Object(S.a)({},e),{},{favorited:r.favorited}):e}));c(n)}m({favorited:r.favorited,favCount:r.favoritesCount})}))};return n.a.createElement(n.a.Fragment,null,o?n.a.createElement(G.a,{onClick:f,className:"heart--red"}):n.a.createElement(H.a,{onClick:f,className:"heart--balck"}),n.a.createElement("span",{className:"favoritesCount"},u))}),$=Object(i.b)((function(e){return{currentArticle:e.currentArticle,articlesList:e.articlesList}}),(function(e){return{setCurrentArticle:function(t){return e(C(t))},setArticles:function(t){return e(k(t))}}}))(Y);Y.defaultProps={articlesList:void 0};var K=Object(i.b)()((function(e){var t=e.article,a=t.slug,r=t.title,c=t.description,l=t.tagList,i=t.createdAt,o=t.author,u=o.username,m=o.image,p={time:Object(W.a)(Object(V.a)(i))};return n.a.createElement(E.a,{className:"gutter-row",span:24},n.a.createElement(f.a,{className:"articlePreview"},n.a.createElement(E.a,{span:18},n.a.createElement("article",null,n.a.createElement(f.a,{gutter:[13,6],type:"flex",align:"middle"},n.a.createElement(E.a,{className:"row-gutter"},n.a.createElement("h1",{className:"articlePreview__title"},r)),n.a.createElement(E.a,{className:"row-gutter"},n.a.createElement($,{slug:a}))),n.a.createElement(f.a,{gutter:[13,6]},n.a.createElement(E.a,{className:"row-gutter"},l.map((function(e){return n.a.createElement(J.a,{key:g.uniqueId()},e)})))),n.a.createElement(f.a,null,n.a.createElement(E.a,null,n.a.createElement(s.b,{to:"".concat("/articles","/").concat(a),className:"articlePreview__link"},c))))),n.a.createElement(E.a,{span:6},n.a.createElement(f.a,{gutter:[12,12],justify:"end"},n.a.createElement(E.a,{className:"row-gutter",span:16},n.a.createElement(f.a,{justify:"end",className:"articlePreview__username"},n.a.createElement(E.a,null,u)),n.a.createElement(f.a,{justify:"end"},n.a.createElement(E.a,null,p.time))),n.a.createElement(E.a,{className:"row-gutter",span:8},n.a.createElement("img",{className:"avatar",src:m,alt:"Avatar"}))))))})),M=function(){var e=Object(v.a)(h.a.mark((function e(t,a,r){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(r,"https://conduit.productionready.io"),e.prev=1,e.next=4,_.a.get(n.toString(),{headers:y(),params:{limit:t,offset:(a-1)*t}});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0.response;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,r){return e.apply(this,arguments)}}(),Q=(a(285),function(e){var t=e.setArticlesCount,a=e.articlesCount,c=e.setArticles,l=e.articlesList,s=e.currentPage,i=e.setCurrentPage;return Object(r.useEffect)((function(){M(10,s,"api/articles").then((function(e){t(e.articlesCount),c(e.articles)}))}),[s,c,t]),l.length?n.a.createElement(f.a,{justify:"center",className:"articlesWrapper",gutter:[24,24]},l.map((function(e){return n.a.createElement(K,{article:e,key:e.slug})})),n.a.createElement(E.a,null,n.a.createElement(D.a,{total:a,pageSize:10,current:s,onChange:function(e){return i(e)},showSizeChanger:!1}))):n.a.createElement(q.a,{tip:"Loading..."})}),Z=Object(i.b)((function(e){var t=e.userInfo,a=e.articlesCount,r=e.articlesList,n=e.currentPage;return{username:t.username,articlesCount:a,articlesList:r,currentPage:n}}),(function(e){return{setArticles:function(t){return e(k(t))},setArticlesCount:function(t){return e(function(e){return{type:"SET_ARTICLE_COUNT",count:e}}(t))},setCurrentPage:function(t){return e(function(e){return{type:"SET_CURRENT_PAGE",page:e}}(t))}}}))(Q);Q.defaultProps={articlesList:void 0};var ee=a(200),te=a.n(ee),ae=(a(306),function(e){var t=e.username,a=e.userImage,r=e.logoutUser;return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,null,n.a.createElement(s.b,{to:"/add",className:"header__createArcticleBtn"},"Create arcticle")),n.a.createElement(E.a,null,n.a.createElement("div",null,n.a.createElement(s.b,{to:"/editprofile",className:"header__username"},t),n.a.createElement("img",{src:a||te.a,alt:"Avatar",className:"header__avatar"}))),n.a.createElement(E.a,null,n.a.createElement(d.a,{className:"header__logoutBtn",onClick:function(){r(),delete localStorage.userInfo}},"Log out")))}),re=Object(i.b)((function(e){var t=e.userInfo;return{username:t.username,userImage:t.image}}),(function(e){return{logoutUser:function(){return e({type:"SET_USER",user:{}})}}}))(ae);ae.defaultProps={userImage:null};var ne=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,null,n.a.createElement(s.b,{to:"/login",className:"header__signLink"},"Sign in")),n.a.createElement(E.a,null,n.a.createElement(s.b,{to:"/signup",className:"header__signupBtn"},"Sign up")))},ce=(a(307),o.a.Header),le=function(e){var t=e.username,a=e.setUser;return localStorage.getItem("userInfo")&&!t&&N("api/users/login","post",JSON.parse(localStorage.getItem("userInfo"))).then((function(e){var t=e.user;return N("".concat("api/profiles","/").concat(t.username),"get").then((function(e){var r=e.image;a(g.omit(t,["token"]),r)}))})),n.a.createElement(ce,{className:"header"},n.a.createElement(f.a,{className:"header__container"},n.a.createElement(E.a,{span:12},n.a.createElement(f.a,{className:"header__leftContainer"},n.a.createElement(s.b,{to:"/",className:"header__linkHome"},"Realworld Blog"))),n.a.createElement(E.a,{span:12},n.a.createElement(f.a,{gutter:[19],justify:"end",className:"header__rightContainer"},t?n.a.createElement(re,null):n.a.createElement(ne,null)))))},se=Object(i.b)((function(e){return{username:e.userInfo.username}}),(function(e){return{setUser:function(t){return e(I(t))}}}))(le);le.defaultProps={username:void 0};var ie=a(323),oe=(a(310),function(){var e=Object(v.a)(h.a.mark((function e(t,a,r){var n,c,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(t,"https://conduit.productionready.io"),c=JSON.stringify(r),e.prev=2,e.next=5,_()({method:a,url:n.toString(),data:c,headers:y()});case 5:return l=e.sent,e.abrupt("return",l.data);case 9:throw e.prev=9,e.t0=e.catch(2),e.t0.response;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a,r){return e.apply(this,arguments)}}()),ue=function(e){var t=e.history,a=e.setCurrentArticle,c=e.delCurrentArticle,l=e.currentArticle,s=e.currentUser,i=e.match.params.slug,o=l.title,u=l.description,m=l.body,p=l.tagList,b=l.createdAt,h=l.author,v=h.username,w=h.image;return Object(r.useEffect)((function(){X("api/articles",i).then((function(e){var t=e.article;return a(t)})).catch((function(){t.push("/")}))}),[t,a,i]),o?n.a.createElement("article",{className:"articlesWrapper"},n.a.createElement(f.a,null,n.a.createElement(E.a,{className:"article"},n.a.createElement(f.a,null,n.a.createElement(E.a,{span:18},n.a.createElement(f.a,{gutter:[13,6],className:"article_header",type:"flex",align:"middle"},n.a.createElement(E.a,{className:"row-gutter"},n.a.createElement("h1",{className:"article_title"},o)),n.a.createElement(E.a,{className:"row-gutter"},n.a.createElement($,{slug:i}))),n.a.createElement(f.a,{gutter:[13,6]},n.a.createElement(E.a,{className:"row-gutter"},p.map((function(e){return n.a.createElement(J.a,{key:g.uniqueId(),className:"tag"},e)})))),n.a.createElement(f.a,null,n.a.createElement(E.a,{className:"article_description"},u)),n.a.createElement(f.a,null,n.a.createElement(E.a,{className:"article_body"},m))),n.a.createElement(E.a,{span:6},n.a.createElement(f.a,{gutter:[12,12],justify:"end"},n.a.createElement(E.a,{className:"row-gutter",span:16},n.a.createElement(f.a,{justify:"end"},n.a.createElement(E.a,null,v)),n.a.createElement(f.a,{justify:"end"},n.a.createElement(E.a,null,Object(W.a)(Object(V.a)(b))))),n.a.createElement(E.a,{className:"row-gutter",span:8},n.a.createElement("img",{className:"avatar",src:w,alt:"Avatar"}))),s===v&&n.a.createElement(f.a,{gutter:[12],justify:"end"},n.a.createElement(E.a,null,n.a.createElement(ie.a,{placement:"right",cancelText:"No",okText:"Yes",title:"Are you sure to delete this article?",onConfirm:function(){oe("".concat("api/articles","/").concat(i),"delete").then((function(){return c()})).then((function(){return t.push("/")}))}},n.a.createElement(d.a,{className:"article_delete"},"Delete"))),n.a.createElement(E.a,null,n.a.createElement(d.a,{className:"article_edit",onClick:function(e){e.preventDefault(),t.push("".concat("/articles","/").concat(i,"/edit"))}},"Edit")))))))):n.a.createElement(q.a,{tip:"Loading..."})},me=Object(i.b)((function(e){return{currentArticle:e.currentArticle,currentUser:e.userInfo.username}}),(function(e){return{setCurrentArticle:function(t){return e(C(t))},delCurrentArticle:function(){return e({type:"DEL_CURRENT_ARTICLE"})}}}))(ue);ue.defaultProps={currentArticle:void 0,match:void 0};var fe=a(144),Ee=a(327),pe=(a(179),a(311),function(e){var t=e.push,a=e.form,r=e.remove,c=a.values.tagList;return n.a.createElement(f.a,{className:"tag"},c.length?n.a.createElement(E.a,{span:12},c.map((function(e,t,a){return function(e,t,a,r){return n.a.createElement(f.a,{gutter:[0,16],key:"".concat(a)},n.a.createElement(E.a,{flex:12},n.a.createElement(m.b,{as:p.a,name:"tagList.".concat(a),placeholder:"Tag",className:"tag__field"})),n.a.createElement(E.a,{flex:2},n.a.createElement(f.a,{justify:"center"},n.a.createElement(d.a,{className:"tag__btn--red",onClick:function(){return r(a)}},"Delete"))))}(a.length,0,t,r)}))):null,n.a.createElement(f.a,{gutter:[0,18],align:"bottom"},n.a.createElement(E.a,{className:"row-gutter"},n.a.createElement(d.a,{className:"tag__btn--blue",onClick:function(){return t("")}},"Add tag"))))}),de=pe;pe.defaultProps={form:void 0};a(312);var ge=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{gutter:[0,24]},n.a.createElement(E.a,{className:"gutter-row",span:24},n.a.createElement("label",{htmlFor:"title",className:"article__label"},"Title:"," "),n.a.createElement(m.b,{as:p.a,name:"title",placeholder:"Title"}),n.a.createElement(m.a,{name:"title",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,24]},n.a.createElement(E.a,{className:"gutter-row",span:24},n.a.createElement("label",{htmlFor:"description",className:"article__label"},"Short description:"," "),n.a.createElement(m.b,{as:p.a,name:"description",placeholder:"Description"}),n.a.createElement(m.a,{name:"description",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,24]},n.a.createElement(E.a,{className:"gutter-row",span:24},n.a.createElement("label",{htmlFor:"body",className:"article__label"},"Text:"," "),n.a.createElement(m.b,{as:p.a.TextArea,name:"body",placeholder:"Text"}),n.a.createElement(m.a,{name:"body",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,24]},n.a.createElement(E.a,{className:"gutter-row",span:24},n.a.createElement("label",{htmlFor:"tagList",className:"article__label"},"Tags:"," "),n.a.createElement(m.c,{name:"tagList",component:de}))))},be=function(e){var t=e.filter((function(e){return e.length>0}));return Object(fe.a)(t)},he=Object(i.b)((function(e){return{userInfo:e.userInfo}}))((function(e){var t=e.userInfo,a=Object(r.useState)(""),c=Object(z.a)(a,2),l=c[0],s=c[1];if(!t.username&&!localStorage.getItem("userInfo"))return n.a.createElement(u.a,{to:"/"});return n.a.createElement(f.a,{className:"newArticle",justify:"center"},n.a.createElement(E.a,{span:24},n.a.createElement(f.a,{justify:"center"},n.a.createElement("h1",{className:"newArticle__title"},"Create new article")),n.a.createElement(f.a,{justify:"center"},n.a.createElement(m.e,{initialValues:{title:"",description:"",body:"",tagList:[]},onSubmit:function(e,t){var a=t.setSubmitting,r=t.setErrors;oe("api/articles","post",{article:Object(S.a)(Object(S.a)({},e),{},{tags:[be(e.tagList)]})}).then((function(e){s(e)})).catch((function(e){return r(A(e))})),a(!1)}},(function(e){var t=e.isSubmitting,a=e.errors;return l?n.a.createElement(Ee.a,{status:"success",extra:[n.a.createElement("span",{key:g.uniqueId()}," Articale sent !")]}):n.a.createElement(m.d,{className:"newArticle__form"},a.errorUnknown&&U(a.errorUnknown),ge(a),n.a.createElement(f.a,{justify:"begin"},n.a.createElement(E.a,{span:8},n.a.createElement(d.a,{htmlType:"submit",type:"primary",disabled:t,block:!0,className:"submitButton"},"Send"))))})))))})),ve=function(e){var t=e.filter((function(e){return e.length>0}));return Object(fe.a)(t)},we=function(e){var t=e.currentArticle,a=e.userInfo,c=Object(r.useState)(""),l=Object(z.a)(c,2),s=l[0],i=l[1];if(!a.username&&!localStorage.getItem("userInfo"))return n.a.createElement(u.a,{to:"/"});var o={title:t.title,description:t.description,body:t.body,tagList:t.tagList};return n.a.createElement(f.a,{className:"newArticle",justify:"center"},n.a.createElement(E.a,{span:24},n.a.createElement(f.a,{justify:"center"},n.a.createElement("h1",{className:"newArticle__title"},"Edit article")),n.a.createElement(f.a,{justify:"center"},n.a.createElement(m.e,{initialValues:o,onSubmit:function(e,a){var r=a.setSubmitting,n=a.setErrors;oe("".concat("api/articles","/").concat(t.slug),"put",{article:Object(S.a)(Object(S.a)({},e),{},{tags:[ve(e.tagList)]})}).then((function(e){i(e)})).catch((function(e){return n(A(e))})),r(!1)}},(function(e){var t=e.isSubmitting,a=e.errors;return s?n.a.createElement(Ee.a,{status:"success",extra:[n.a.createElement("span",{key:g.uniqueId()}," Articale sent !")]}):n.a.createElement(m.d,{className:"newArticle__form"},a.errorUnknown&&U(a.errorUnknown),ge(a),n.a.createElement(f.a,{justify:"begin"},n.a.createElement(E.a,{span:8},n.a.createElement(d.a,{htmlType:"submit",type:"primary",disabled:t,block:!0,className:"submitButton"},"Send"))))})))))},_e=Object(i.b)((function(e){return{currentArticle:e.currentArticle,userInfo:e.userInfo}}))(we);we.defaultProps={currentArticle:void 0,userInfo:void 0};var ye=x.b().shape({username:x.d(),email:x.d().email(),password:x.d().min(8,"Too short, minimum 8 character").max(20,"Too long, maximum 20 characters"),image:x.d().url()}),Ne=Object(i.b)((function(e){return{userInfo:e.userInfo}}),(function(e){return{setUser:function(t){return e(I(t))}}}))((function(e){var t=e.userInfo,a=e.setUser,c=Object(r.useState)(""),l=Object(z.a)(c,2),s=l[0],i=l[1];return localStorage.getItem("userInfo")?t.username?n.a.createElement(f.a,{className:"formWrapper",justify:"center"},n.a.createElement(m.e,{initialValues:{username:t.username,email:t.email,password:"",image:t.image||""},validationSchema:ye,onSubmit:function(e,t){var r=t.setSubmitting,n=t.setErrors,c=g.omitBy(e,(function(e){return""===e}));if(!g.values(c).length)return n({errorUnknown:"At least one field required."}),void r(!1);N("api/user","put",c).then((function(t){var r=t.user,n=localStorage.getItem("userInfo").password;localStorage.setItem("userInfo",JSON.stringify({email:r.email,password:e.password||n,token:r.token}).toString()),a(g.omit(r),["token"]),i(r)})).catch((function(e){n(A(e))})),r(!1)}},(function(e){var t=e.isSubmitting,a=e.errors;return s?n.a.createElement(Ee.a,{status:"success",extra:[n.a.createElement("span",null," Profile edited !")]}):n.a.createElement(m.d,null,n.a.createElement(f.a,{className:"form_title",justify:"center"},"Edit profile"),a.errorUnknown&&U(a.errorUnknown),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"username",className:"form_label"},"Username:"," "),n.a.createElement(m.b,{as:p.a,name:"username"}),n.a.createElement(m.a,{name:"username",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"email",className:"form_label"},"Email address:"," "),n.a.createElement(m.b,{as:p.a,type:"email",name:"email"}),n.a.createElement(m.a,{name:"email",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"password",className:"form_label"},"New password:"," "),n.a.createElement(m.b,{as:p.a.Password,name:"password",placeholder:"New password"}),n.a.createElement(m.a,{name:"password",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement("label",{htmlFor:"image",className:"form_label"},"Image:"," "),n.a.createElement(m.b,{as:p.a,name:"image",placeholder:"Avatar image"}),n.a.createElement(m.a,{name:"image",render:function(e){return U(e)}}))),n.a.createElement(f.a,{gutter:[0,18]},n.a.createElement(E.a,{span:24},n.a.createElement(d.a,{htmlType:"submit",type:"primary",disabled:t,block:!0,className:"submitButton"},"Save"))))}))):(localStorage.getItem("userInfo"),N("api/user","get").then((function(e){var t=e.user;return N("".concat("api/profiles","/").concat(t.username),"get").then((function(e){var r=e.image;a(g.omit(t,["token"]),r)}))})),n.a.createElement(u.a,{to:"/editprofile"})):n.a.createElement(u.a,{to:"/"})})),je=o.a.Content,Se=Object(u.g)(Object(i.b)()((function(){return n.a.createElement(o.a,{className:"wrapper"},n.a.createElement(se,null),n.a.createElement(je,null,n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:"/",component:Z}),n.a.createElement(u.b,{path:"/login",component:P}),n.a.createElement(u.b,{path:"/signup",component:B}),n.a.createElement(u.b,{exact:!0,path:"".concat("/articles","/:slug"),component:me}),n.a.createElement(u.b,{path:"/add",render:function(){return n.a.createElement(he,null)}}),n.a.createElement(u.b,{path:"".concat("/articles","/:slug/edit"),render:function(e){var t=e.match;return localStorage.getItem("userInfo")?n.a.createElement(_e,{match:t}):n.a.createElement(u.a,{to:{pathname:"/login"}})}}),n.a.createElement(u.b,{path:"/editprofile",render:function(){return n.a.createElement(Ne,null)}}))))})));a(315),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=a(90),Ae=a(203),Ie={email:"",username:"",bio:"",image:""},ke={slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favoritesCount:"",author:{username:"",image:"",bio:"",following:!1},isEdit:!1},Ce=window.__REDUX_DEVTOOLS_EXTENSION__,Te=Ce&&Ce(),Ue=Object(Oe.c)({userInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.user;switch(a){case"SET_USER":return{email:r.email,token:r.token,username:r.username,bio:r.bio,image:r.image};default:return e}},articlesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ARTICLES":return t.articles;default:return e}},articlesCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ARTICLE_COUNT":return t.count;default:return e}},currentArticle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_ARTICLE":return t.article;case"DEL_CURRENT_ARTICLE":return ke;default:return e}},currentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE":return t.page;default:return e}}}),Le=Object(Oe.e)(Ue,Object(Oe.d)(Object(Oe.a)(Ae.a),Te));l.a.render(n.a.createElement(i.a,{store:Le},n.a.createElement(s.a,null,n.a.createElement(Se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.a06a2f81.chunk.js.map